{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["const refs = {\n  feedbackForm: document.querySelector('.feedback-form'),\n};\n\nconst STORAGE_KEY = 'feedback-form-state';\n\nlet formData = {\n  email: '',\n  message: '',\n};\n\nfunction debounce(fn, wait = 300) {\n  let timer;\n  return function debounced(...args) {\n    const ctx = this;\n    clearTimeout(timer);\n    timer = setTimeout(() => fn.apply(ctx, args), wait);\n  };\n}\n\nconst loadStateFromLS = () => {\n  try {\n    const saved = JSON.parse(localStorage.getItem(STORAGE_KEY));\n    if (saved === null) return;\n\n    refs.feedbackForm.elements.email.value = saved.email ?? '';\n    refs.feedbackForm.elements.message.value = saved.message ?? '';\n\n    formData = saved;\n  } catch (err) {\n    console.log(err.message);\n  }\n};\n\nloadStateFromLS();\n\nconst onFeedbackFormInputRaw = () => {\n  const { email, message } = refs.feedbackForm.elements;\n\n  formData.email = email.value.trim();\n  formData.message = message.value.trim();\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n};\n\nconst onFeedbackFormInput = debounce(onFeedbackFormInputRaw, 300);\n\nconst onFeedbackFormSubmit = e => {\n  e.preventDefault();\n  const valueFormData = Object.values(formData);\n  if (valueFormData.includes('')) {\n    alert('Fill please all fields');\n    return;\n  }\n  console.log(formData);\n  formData.email = '';\n  formData.message = '';\n  refs.feedbackForm.reset();\n  localStorage.removeItem(STORAGE_KEY);\n};\n\nrefs.feedbackForm.addEventListener('input', onFeedbackFormInput);\nrefs.feedbackForm.addEventListener('submit', onFeedbackFormSubmit);\n"],"names":["refs","STORAGE_KEY","formData","debounce","fn","wait","timer","args","ctx","loadStateFromLS","saved","err","onFeedbackFormInputRaw","email","message","onFeedbackFormInput","onFeedbackFormSubmit"],"mappings":"wFAAA,MAAMA,EAAO,CACX,aAAc,SAAS,cAAc,gBAAgB,CACvD,EAEMC,EAAc,sBAEpB,IAAIC,EAAW,CACb,MAAO,GACP,QAAS,EACX,EAEA,SAASC,EAASC,EAAIC,EAAO,IAAK,CAChC,IAAIC,EACJ,OAAO,YAAsBC,EAAM,CACjC,MAAMC,EAAM,KACZ,aAAaF,CAAK,EAClBA,EAAQ,WAAW,IAAMF,EAAG,MAAMI,EAAKD,CAAI,EAAGF,CAAI,CACtD,CACA,CAEA,MAAMI,EAAkB,IAAM,CAC5B,GAAI,CACF,MAAMC,EAAQ,KAAK,MAAM,aAAa,QAAQT,CAAW,CAAC,EAC1D,GAAIS,IAAU,KAAM,OAEpBV,EAAK,aAAa,SAAS,MAAM,MAAQU,EAAM,OAAS,GACxDV,EAAK,aAAa,SAAS,QAAQ,MAAQU,EAAM,SAAW,GAE5DR,EAAWQ,CACZ,OAAQC,EAAK,CACZ,QAAQ,IAAIA,EAAI,OAAO,CACxB,CACH,EAEAF,IAEA,MAAMG,EAAyB,IAAM,CACnC,KAAM,CAAE,MAAAC,EAAO,QAAAC,CAAO,EAAKd,EAAK,aAAa,SAE7CE,EAAS,MAAQW,EAAM,MAAM,KAAI,EACjCX,EAAS,QAAUY,EAAQ,MAAM,KAAI,EAErC,aAAa,QAAQb,EAAa,KAAK,UAAUC,CAAQ,CAAC,CAC5D,EAEMa,EAAsBZ,EAASS,EAAwB,GAAG,EAE1DI,EAAuB,GAAK,CAGhC,GAFA,EAAE,eAAc,EACM,OAAO,OAAOd,CAAQ,EAC1B,SAAS,EAAE,EAAG,CAC9B,MAAM,wBAAwB,EAC9B,MACD,CACD,QAAQ,IAAIA,CAAQ,EACpBA,EAAS,MAAQ,GACjBA,EAAS,QAAU,GACnBF,EAAK,aAAa,QAClB,aAAa,WAAWC,CAAW,CACrC,EAEAD,EAAK,aAAa,iBAAiB,QAASe,CAAmB,EAC/Df,EAAK,aAAa,iBAAiB,SAAUgB,CAAoB"}